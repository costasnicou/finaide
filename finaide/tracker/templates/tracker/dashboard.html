
{% extends 'tracker/base.html'%}
{% load static %}


{% block cover %}

{% endblock %}
{% block main %}
<h1>Welcome, {{ user.username }}</h1>
<form action="{% url 'logout' %}" method="post">
    {% csrf_token %}
    <button type="submit">Log Out</button>
</form>
<h2>Total Balance: {{ total_balance }}</h2>

<!-- Wallets Section -->
<h3>Your Wallets:</h3>
<a href="{% url 'add_wallet' %}">Add Wallet</a>
<ul>
    {% for wallet in wallets %}
        <li>
            {{ wallet.name }} ({{ wallet.category }}) - Balance: {{ wallet.balance }}
            <a href="{% url 'add_transaction' wallet.id %}">Add Transaction</a>
            <a href="{% url 'delete_wallet' wallet.id %}" style="color: red;">Delete</a>
        </li>
    {% endfor %}
</ul>

<!-- Transactions Section -->
<h3>Recent Transactions:</h3>
<table border="1">
    <thead>
        <tr>
            <th>Type</th>
            <th>Category</th>
            <th>Amount</th>
            <th>Wallet</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody>
        {% for transaction in transactions %}
            <tr>
                <td>{{ transaction.type }}</td>
                <td>{{ transaction.category }}</td>
                <td>{{ transaction.amount }}</td>
                <td>{{ transaction.wallet.name }}</td>
                <td>{{ transaction.timestamp|date:"Y-m-d H:i" }}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="5">No transactions available.</td>
            </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
